// Example: Using the String type from std.string
import std.io;
import std.string;

i32 main() {
    printf("=== String Object Example ===\n\n");
    
    // Create strings using different methods
    printf("--- Creating Strings ---\n");
    
    String s1 = String.new();
    printf("Empty string: ");
    s1.debug();
    
    String s2 = String.from("Hello, Silver!");
    printf("From literal: ");
    s2.debug();
    
    String s3 = String.with_capacity(100);
    printf("With capacity: ");
    s3.debug();
    
    // String operations
    printf("\n--- String Operations ---\n");
    
    printf("Length of s2: %ld\n", s2.length());
    printf("Is s1 empty? %s\n", s1.is_empty() ? "yes" : "no");
    printf("Is s2 empty? %s\n", s2.is_empty() ? "yes" : "no");
    
    // Modifying strings
    printf("\n--- Modifying Strings ---\n");
    
    s1.append("Hello");
    printf("After append 'Hello': ");
    s1.debug();
    
    s1.append(" World");
    printf("After append ' World': ");
    s1.debug();
    
    s1.push_char(33);  // '!'
    printf("After push '!': ");
    s1.debug();
    
    // String comparisons
    printf("\n--- String Comparisons ---\n");
    
    String hello = String.from("Hello");
    printf("s1 equals 'Hello World!': %s\n", 
           s1.equals("Hello World!") ? "yes" : "no");
    printf("s1 starts with 'Hello': %s\n", 
           s1.starts_with("Hello") ? "yes" : "no");
    printf("s1 ends with 'World!': %s\n", 
           s1.ends_with("World!") ? "yes" : "no");
    
    // Searching
    printf("\n--- Searching ---\n");
    
    i64 pos = s1.find_char(87);  // 'W'
    printf("Position of 'W' in s1: %ld\n", pos);
    
    pos = s1.find("World");
    printf("Position of 'World' in s1: %ld\n", pos);
    
    // Substring
    printf("\n--- Substring ---\n");
    
    String sub = s1.substring(6, 5);
    printf("Substring(6, 5): ");
    sub.debug();
    
    // Clone
    printf("\n--- Cloning ---\n");
    
    String s4 = s2.clone();
    printf("Original: ");
    s2.debug();
    printf("Clone: ");
    s4.debug();
    
    s4.append(" (modified)");
    printf("Modified clone: ");
    s4.debug();
    printf("Original unchanged: ");
    s2.debug();
    
    // Clean up
    printf("\n--- Cleanup ---\n");
    drop(s1);
    drop(s2);
    drop(s3);
    drop(s4);
    drop(hello);
    drop(sub);
    printf("All strings dropped.\n");
    
    return 0;
}
