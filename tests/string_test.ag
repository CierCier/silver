// Test suite for std.string - String type
import std.io;
import std.string;

i32 tests_passed = 0;
i32 tests_failed = 0;

void assert_true(bool cond, str msg) {
    if (cond) {
        tests_passed = tests_passed + 1;
        printf("  [PASS] %s\n", msg);
    } else {
        tests_failed = tests_failed + 1;
        printf("  [FAIL] %s\n", msg);
    }
}

void assert_eq_i64(i64 a, i64 b, str msg) {
    if (a == b) {
        tests_passed = tests_passed + 1;
        printf("  [PASS] %s\n", msg);
    } else {
        tests_failed = tests_failed + 1;
        printf("  [FAIL] %s (expected %ld, got %ld)\n", msg, b, a);
    }
}

i32 main() {
    printf("=== String Tests ===\n\n");
    
    String s = String.new();

    printf("String created: capacity=%ld\n", s.capacity);
    printf("String data ptr: %p\n", s.data);
    printf("String len: %ld\n", s.len);

    assert_eq_i64(s.len, 0, "New string has length 0");
    return tests_failed > 0 ? 1 : 0;
}

